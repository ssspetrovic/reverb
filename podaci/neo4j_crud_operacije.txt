// 1. CollectionSong
// CREATE
    CREATE (:CollectionSong {
        track_id: 'novi_id_pesme',
        track_name: 'Naziv nove pesme',
        track_artist: 'Izvodjac pesme',
        track_popularity: 70, 
        track_album_id: 'id_albuma',
        track_album_name: 'Naziv albuma',
        track_album_release_date: 'Datum izlaska albuma',
        playlist_name: 'Naziv plejliste',
        playlist_id: 'id_plejliste',
        playlist_genre: 'Zanr plejliste',
        playlist_subgenre: 'Podzanr plejliste',
        danceability: 0.8,
        energy: 0.7,
        key: 5,
        loudness: -6.2,
        mode: 1,
        speechiness: 0.05,
        acousticness: 0.1,
        instrumentalness: 0.3,
        liveness: 0.2,
        valence: 0.8,
        tempo: 120,
        duration_ms: 240000
    })

// READ
    MATCH (s:CollectionSong {track_id: 'novi_id_pesme'})
    RETURN s

// UPDATE
    MATCH (s:CollectionSong {track_id: 'novi_id_pesme'})
    SET s.track_popularity = 80
    RETURN s

// DELETE
    MATCH (s:CollectionSong {track_id: 'novi_id_pesme'})
    DELETE s



// 2. CollectionArtist
// CREATE
CREATE (a:CollectionArtist {name: 'Ime izvodjaca'})
SET a.artist_id = id(a)

// READ
MATCH (a:CollectionArtist {name: 'Ime izvodjaca'})
RETURN a

// UPDATE
MATCH (a:CollectionArtist {name: 'Ime izvodjaca'})
SET a.name = 'Novo ime izvodjaca'

// DELETE
MATCH (a:CollectionArtist {name: 'Novo ime izvodjaca'})
DETACH DELETE a



// 3. CollectionAlbum

// CREATE
CREATE (al:CollectionAlbum {album_id: 'Id albuma', name: 'Naziv albuma', artist: 'Ime izvodjaca', release_date: 'Datum izlaska'})

// READ
MATCH (al:CollectionAlbum {album_id: 'Id albuma'})
RETURN al

// UPDATE
MATCH (al:CollectionAlbum {album_id: 'Id albuma'})
SET al.name = 'Novi naziv albuma', al.artist = 'Novo ime izvodjaca', al.release_date = 'Novi datum izlaska'

// DELETE
MATCH (al:CollectionAlbum {album_id: 'Id albuma'})
DETACH DELETE al



// 4. CollectionPlaylist

// CREATE
CREATE (p:CollectionPlaylist {name: 'Naziv plejliste', playlist_id: 'Id plejliste', genre: 'Zanr', subgenre: 'Podzanr'})

// READ
MATCH (p:CollectionPlaylist {name: 'Naziv plejliste'})
RETURN p

// UPDATE
MATCH (p:CollectionPlaylist {playlist_id: 'Id plejliste'})
SET p.name = 'Novi naziv plejliste', p.genre = 'Novi zanr', p.subgenre = 'Novi podzanr'

// DELETE
MATCH (p:CollectionPlaylist {name: 'Novi naziv plejliste'})
DETACH DELETE p



// GRANE

//CREATE

// Kreiranje relacije između pesme i izvođača
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'}), (a:CollectionArtist {name: 'Fedde Le Grand'})
CREATE (s)-[:PERFORMED_BY]->(a)

// Kreiranje relacije između pesme i albuma
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'}), (al:CollectionAlbum {name: 'Runaway'})
CREATE (s)-[:INCLUDED_IN]->(al)

// Kreiranje relacije između pesme i plejliste
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'}), (p:CollectionPlaylist {playlist_id: '2oalsaFUockoPf1DU3wrL8'})
CREATE (s)-[:INCLUDED_IN_PLAYLIST]->(p)


// READ

// Čitanje relacija između pesme i izvođača
MATCH (s:CollectionSong)-[:PERFORMED_BY]->(a:CollectionArtist)
RETURN s.track_id, s.track_name, a.name

// Čitanje relacija između pesme i albuma
MATCH (s:CollectionSong)-[:INCLUDED_IN]->(al:CollectionAlbum)
RETURN s.track_id, s.track_name, al.name

// Čitanje relacija između pesme i plejliste
MATCH (s:CollectionSong)-[:INCLUDED_IN_PLAYLIST]->(p:CollectionPlaylist)
RETURN s.track_id, s.track_name, p.name


// UPDATE

// Ažuriranje relacije između pesme i izvođača
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:PERFORMED_BY]->(a:CollectionArtist)
DELETE r
WITH s, a
MATCH (newArtist:CollectionArtist {name: 'Mike Cervello'})
CREATE (s)-[:PERFORMED_BY]->(newArtist)

// Ažuriranje relacije između pesme i albuma
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:INCLUDED_IN]->(al:CollectionAlbum)
DELETE r
WITH s, al
MATCH (newAlbum:CollectionAlbum {name: 'We Are One (feat. Pearl Andersson) (TYMEN Remix)'})
CREATE (s)-[:INCLUDED_IN]->(newAlbum)

// Ažuriranje relacije između pesme i plejliste
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:INCLUDED_IN_PLAYLIST]->(p:CollectionPlaylist)
DELETE r
WITH s, p
MATCH (newPlaylist:CollectionPlaylist {playlist_id: '4R4c3WdN1Any2Q1NSuec3r'})
CREATE (s)-[:INCLUDED_IN_PLAYLIST]->(newPlaylist)


// DELETE

// Brisanje relacije između pesme i izvođača
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:PERFORMED_BY]->(a:CollectionArtist)
DELETE r

// Brisanje relacije između pesme i albuma
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:INCLUDED_IN]->(al:CollectionAlbum)
DELETE r

// Brisanje relacije između pesme i plejliste
MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[r:INCLUDED_IN_PLAYLIST]->(p:CollectionPlaylist)
DELETE r


//TEST 

MATCH (s:CollectionSong {track_id: '1dcaJ3vOelzh4xYAWiEFbQ'})-[:PERFORMED_BY]->(a:CollectionArtist)
RETURN a.name AS artistName
